<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="MSM">
<meta name="dcterms.date" content="2023-06-25">

<title>Michael Schulte-Mecklenbeck - Replication: Red</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6YMRGKPWZY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6YMRGKPWZY');
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Michael Schulte-Mecklenbeck</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../_content/CV_Index.pdf" rel="" target="">
 <span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Replication: Red</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Replication</div>
                <div class="quarto-category">Perception</div>
                <div class="quarto-category">Consumer Behavior</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>MSM </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 25, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="original-work" class="level1">
<h1>Original work</h1>
<p>Hagtvedt, H., &amp; Brasel, S. A. (2017). Color saturation increases perceived product size. <em>Journal of Consumer Research, 44</em>(2), 396-413.</p>
</section>
<section id="team-ma-spring-2021" class="level1">
<h1>Team MA Spring 2021</h1>
<ul>
<li>Anaïs Merz</li>
<li>Nemanja Sobajic</li>
</ul>
<p><a href="https://osf.io/4cjqv/">OSF</a> <a href="https://osf.io/r2x4w">Pre-Reg (German)</a></p>
<section id="abstract" class="level2">
<h2 class="anchored" data-anchor-id="abstract">Abstract</h2>
<p>This research demonstrates a visual phenomenon with broad implications for consumers: the perceived size of products depends on the saturation of their color. Results from six experiments, employing objects and products with various shapes and hues, show that increasing color saturation increases size perceptions. This influence is explained by the tendency for saturated color to capture attention, which, in turn, is explained by the arousal that saturated color stimulates. This research also demonstrates several downstream outcomes of the effect of saturation on size perceptions: evaluations are more favorable—and willingness to pay is higher—for products with high (low) saturation when usage goals call for large (small) size. Additionally, participants choose more of a product to fill a container with higher saturation. Further, the saturation of an object’s color affects the perceived size of its surroundings, such that when a product with high (vs.&nbsp;low) saturation is used as a benchmark, the environment is perceived to be comparatively smaller (vs.&nbsp;larger). Implications for aesthetics, design, sensory marketing, and related topics are discussed. Lastly, to aid future color research, appendix A outlines general challenges and recommendations in connection with the conceptualization, manipulation, and measurement of color.</p>
</section>
</section>
<section id="replication" class="level1">
<h1>Replication</h1>
<p>We ran a direct replication of experiment 1 to experiment 4 of Hadtvedt &amp; Brasel (2017). While the authors ran different samples for each of their experiments, we decided to use one larger subject pool and run all experiments (ie tasks) within-subject (in randomized order). Clearly there are benefits for each of these approaches, one could argue that repeating similar tasks would have transfer influences, on the other hand having a much larger sample (the smallest sample size in the original work was 56, in our study we collected 261 participants) gives us a better power to detect even small effects.</p>
<p>A second, even more relevant deviation from the original work is the lab-online difference. The authors collected their data in the lab with standardized calibration on the same monitors. We ran our sample online, meaning that we do not have control on setup and color calibration. We will get back to this point in the caveats below.</p>
</section>
<section id="demographics" class="level1">
<h1>Demographics</h1>
<p>The original paper had the following number of participants in each experiment:</p>
<ul>
<li><strong>Exp1</strong> 56</li>
<li><strong>Exp2</strong> 58</li>
<li><strong>Exp3</strong> 80</li>
<li><strong>Exp4</strong> 160</li>
</ul>
<p>Overall we collected data from <strong>328 participants</strong>. Two pre-registered attention checks were built into the questionnaire which had to be <strong>passed both</strong> for inclusion. This step reduced the sample to: <strong>270 participants</strong>. Finally we asked participants whether they are color-blind - this step removed two participants.</p>
<p>After aplying these exclusion criteriawe ended up with 261 participants (56.4% female). Female participants were on average <em>M =</em> 44.8 years, <em>SD =</em> 11.3 years, male participants were <em>M =</em> 41 years, <em>SD =</em> 8.5 years.</p>
<section id="experiment-1---the-cube-their-study-1" class="level2">
<h2 class="anchored" data-anchor-id="experiment-1---the-cube-their-study-1">Experiment 1 - The Cube (their Study 1)</h2>
<p>Experiment 1 tests a simple idea - <strong>color saturation changes size perception of objects</strong>. In the original it says: `Participants are exposed to cubes with high- versus low-saturation color and identify which one they perceive to be larger.’</p>
<div id="fig-exp1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/cubes_overview.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Cubes 100%-25% saturation</figcaption>
</figure>
</div>
<p>While setting up the experiment we added two additions in the experimental setup: 1) instead of having just two levels (high-low <code>saturation</code>) we decided to use <strong>4-levels</strong> of <code>saturation</code>: 25%, 50% 75%, 100% (as can be seen in Figures <a href="#fig-exp1">Figure&nbsp;1</a>). We also added an additional answering option ‘the same’ (in the original work the options were ‘left’ or ‘right’ to identify the larger cube). Hence we ensured that participants had the option to state that they perceive the cubes as having the same size.</p>
<p>We used binary choices on the one side (counterbalanced) cubes with either [25%, 50%, or 75%] <code>saturation</code> on the other left side 100% <code>saturation</code>.</p>
</section>
<section id="either-left-or-right-direct-replication" class="level2">
<h2 class="anchored" data-anchor-id="either-left-or-right-direct-replication">Either left or right (direct replication)</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-results-A2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="staticfig-results-A2-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Results Replication Experiment 1</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-results-A2">Figure&nbsp;2</a> plots the results for each of the three conditions - 25 v 100, 50 v 100 (the original condition) and 75 v 100. It becomes clear that we nicely replicate the finding of the authors with consistent <em>larger judgments</em> for the <em>higher saturation</em> condition (ie 100). Following the analysis in the original work, we ran chi2 tests for each of the three conditions, revealing significant differences for the</p>
<p><strong>25 condition</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
    Chi-squared test for given probabilities

data:  table(cube_A2_25$response, cube_A2_25$Sat)
X-squared = 6, df = 1, p-value = 0.02</code></pre>
</div>
</div>
<p><strong>50 condition</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
    Chi-squared test for given probabilities

data:  table(cube_A2_50$response, cube_A2_50$Sat)
X-squared = 11, df = 1, p-value = 0.001</code></pre>
</div>
</div>
<p><strong>75 condition</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
    Chi-squared test for given probabilities

data:  table(cube_A2_75$response, cube_A2_75$Sat)
X-squared = 10, df = 1, p-value = 0.001</code></pre>
</div>
</div>
<p>Pretty cool!</p>
</section>
<section id="left-or-right-or-simply-the-same." class="level2">
<h2 class="anchored" data-anchor-id="left-or-right-or-simply-the-same.">Left or right or simply the same.</h2>
<p>Anais and Nemanja came up with a question - but what if people want to say - ‘hey these two cubes look the same size?’. Extension to the above experiment 1 - let us add a third answering option where participants can either say ‘left’ or ‘right’ or ‘same’ (for both having the same perceived size.)</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-results-A3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="staticfig-results-A3-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Results Replication Experiment 1 - Three answering options</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-results-A3">Figure&nbsp;3</a> shows the results of this little adventure. Hmm - clearly there is a strong preference for participants choosing the ‘same’ size option (in grey). This effect seems to depend on the <code>saturation</code> (the distance between the left and right cube) - the smaller the difference, the harder it is to keep the cubes apart. Inspecting the cell sizes in the different conditions we see that for 25 and 50 the percentage of left-right answers is quite small.</p>
<div class="cell" data-layout-align="center" data-tab-cap="Number of answers per condition Experiment 1 - Three answering options">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
# Groups:   Sat [3]
  Sat   response     n   sum   perc
  &lt;fct&gt; &lt;fct&gt;    &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
1 25    0            1    36 0.0278
2 25    1            3    36 0.0833
3 25    2           32    36 0.889 
4 50    0            5    37 0.135 
5 50    1            8    37 0.216 
6 50    2           24    37 0.649 
7 75    0           15    54 0.278 
8 75    1           14    54 0.259 
9 75    2           25    54 0.463 </code></pre>
</div>
</div>
<p>So, running tests on this does not really make sense, but we can at least check the 75 condition:</p>
<p><strong>75 condition</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
    Chi-squared test for given probabilities

data:  table(cube_A3_75$response, cube_A3_75$Sat)
X-squared = 4, df = 2, p-value = 0.1</code></pre>
</div>
</div>
<p>As one would expect from the table above - we find no significant preference for left or right - just by adding a ‘same’ option in our experiment.</p>
</section>
<section id="experiment-2---laptops-their-study-3" class="level2">
<h2 class="anchored" data-anchor-id="experiment-2---laptops-their-study-3">Experiment 2 - Laptops (their Study 3)</h2>
<p>In the original paper study 2 was run with an eye-tracker recording, among eye-movements, pupil dilation. We did not have an eye-tracker at hand for this study - so we moved on to their study 3 asking whether color <code>saturation</code> has an attention grabing effect, an effect on arousal and an effect on size perception. The original authors only ran one color - as different colors have different attention grabing effects, we extended the material to three colors (see <a href="#fig-exp2">Figure&nbsp;4</a>) and a new object to judge: <strong>laptops</strong>.</p>
<div id="fig-exp2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/laptops_overview.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;4: Laptops 100% &amp; 50% saturation</figcaption>
</figure>
</div>
<p>In the original study laptops were shown in a projection on the wall, we, again, use our online sample. Here is what we are looking for - results from study 3 in <a href="#fig-study3-results">Figure&nbsp;5</a>.</p>
<div id="fig-study3-results" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/study3_results.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;5: ANOVA results study 3</figcaption>
</figure>
</div>
<p>Let’s first plot what we find for the three colors:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-results-L" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="staticfig-results-L-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Results Replication Study 3 - Size</figcaption>
</figure>
</div>
</div>
</div>
<p>Let us first look only at the red stimuli - they were also used in the original. <span class="citation" data-cites="tab-results-R">@tab-results-R</span> plots the ANOVA results. We find a non-significant main effect for <code>saturation</code> with <em>M<sub>high</sub></em> = 14.6, <em>SD<sub>high</sub></em> = 1.5 vs.&nbsp;<em>M<sub>low</sub></em> = 14.6, <em>SD<sub>low</sub></em> = 1.7, <em>F</em>(1, model$df.residual) = 0.29, <em>p</em> = .59, <em>eta<sup>2</sup></em> = 0.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>            Df Sum Sq Mean Sq F value Pr(&gt;F)
Sat          1    0.9   0.857    0.29   0.59
Residuals   82  245.2   2.990               </code></pre>
</div>
</div>
<p>In addition we also look at the whole model with 3 color levels and 2 <code>saturation</code> levels.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>             Df Sum Sq Mean Sq F value Pr(&gt;F)
Color         2      6    3.04    1.15   0.32
Sat           1      1    1.22    0.46   0.50
Color:Sat     2      6    3.21    1.21   0.30
Residuals   262    694    2.65               </code></pre>
</div>
</div>
<p>Again, not a lot going on for <code>saturation</code> (<em>F</em> = 0.46) or the three different <code>colors</code> we used (<em>F</em> = 1.15), also the interaction does not show an effect.</p>
<p>The authors also found effects of <code>saturation</code> on <code>arousal</code> and <code>mood</code>. We plot the averages for these dependent measures in <a href="#fig-results-A">Figure&nbsp;7</a> and <a href="#fig-results-M">Figure&nbsp;8</a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-results-A" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="staticfig-results-A-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;7: Results Replication Study 3 - Arrousal</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>             Df Sum Sq Mean Sq F value Pr(&gt;F)
Color         2      2    1.05    0.31   0.73
Sat           1      1    0.83    0.25   0.62
Color:Sat     2      4    1.99    0.60   0.55
Residuals   262    878    3.35               </code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-results-M" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="staticfig-results-M-1.png" class="img-fluid figure-img" width="768"></p>
<figcaption class="figure-caption">Figure&nbsp;8: Results Replication Study 3 - Mood</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>             Df Sum Sq Mean Sq F value Pr(&gt;F)
Color         2      6    2.94    0.78   0.46
Sat           1      1    0.60    0.16   0.69
Color:Sat     2      1    0.35    0.09   0.91
Residuals   262    986    3.76               </code></pre>
</div>
</div>
</section>
<section id="experiment-3---suitcases" class="level2">
<h2 class="anchored" data-anchor-id="experiment-3---suitcases">Experiment 3 - Suitcases</h2>
<div id="fig-exp3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/suitcases_overview.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;9: Suitcases 100%-25% saturation</figcaption>
</figure>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="staticunnamed-chunk-16-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>             Df Sum Sq Mean Sq F value Pr(&gt;F)
Sat           3   1784     595    1.02   0.38
target        1   1036    1036    1.78   0.18
Sat:target    3    219      73    0.13   0.95
Residuals   256 149122     583               </code></pre>
</div>
</div>
</section>
<section id="experiment-4---couches" class="level2">
<h2 class="anchored" data-anchor-id="experiment-4---couches">Experiment 4 - Couches</h2>
<div id="fig-exp4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/couches_overview.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;10: Couches 100% &amp; 50% saturation</figcaption>
</figure>
</div>
</section>
</section>
<section id="caveats" class="level1">
<h1>Caveats</h1>
</section>
<section id="references" class="level1">
<h1>References</h1>
<p>Hagtvedt, H., &amp; Brasel, S. A. (2017). <a href="https://doi.org/10.1093/jcr/ucx039">Color saturation increases perceived product size</a>. <em>Journal of Consumer Research, 44</em>(2), 396-413.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">2023 Michael Schulte-Mecklenbeck</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>